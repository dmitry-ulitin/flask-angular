<div class="row h-100">
    <div class="col h-100 d-flex flex-column">
        <div>
            <div class="btn-toolbar mb-2" role="toolbar">
                <div class="btn-group mr-2" role="group">
                    <button type="button" class="btn btn-outline-primary" (click)="refresh()">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
                <div class="btn-group mr-2" role="group">
                    <button type="button" class="btn btn-outline-primary" (click)="create(1)">
                        <i class="fas fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-outline-primary" (click)="create(0)">
                        <i class="fas fa-exchange-alt"></i>
                    </button>
                    <button type="button" class="btn btn-outline-primary" (click)="create(2)">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div class="btn-group mr-2" role="group" *ngIf="selected$ | async">
                    <a role="button" class="btn btn-outline-primary"
                        [routerLink]="['/transactions/edit/'+(selected$ | async)?.id]">
                        <i class="fas fa-pencil-alt"></i>
                    </a>
                    <button type="button" class="btn btn-outline-primary" (click)="delete()">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </div>
                <div *ngIf="((filter$ | async)?.groups || []).length" class="filter">
                    {{(filter$ | async)?.groups[0].full_name}} <button type="button" class="close ml-2"
                        aria-label="Close" (click)="clearFilter()"><span aria-hidden="true">&times;</span></button>
                </div>
            </div>
        </div>
        <div class="flex-grow-1" style="overflow-y:auto">
            <table class="table table-sm">
                <tr *ngFor="let t of transactions$ | async" (click)="select(t)"
                    [class.table-active]="(selected$ | async)?.id == t.id" [style.background-color]="t.bg">
                    <td class="nowrap">
                        <div>{{getName(t)}}</div>
                        <div class="text-black-50">{{t.opdate | date:'shortDate'}} {{getBalance(t)?.full_name}}</div>
                    </td>
                    <td class="text-right">
                        <div>{{t.credit | currency:t.currency}}</div>
                        <div class="text-black-50">{{getBalance(t)?.balance | currency:getBalance(t)?.currency}}</div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>